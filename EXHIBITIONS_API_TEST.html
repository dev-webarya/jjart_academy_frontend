<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exhibitions API Integration Test</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            background: white;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        h1 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .status {
            display: inline-block;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
            margin-top: 10px;
        }

        .status.success {
            background: #d4edda;
            color: #155724;
        }

        .status.error {
            background: #f8d7da;
            color: #721c24;
        }

        .status.loading {
            background: #cfe2ff;
            color: #084298;
        }

        .tests-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .test-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .test-card h2 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 18px;
        }

        .test-card button {
            width: 100%;
            padding: 12px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            margin-bottom: 10px;
            transition: transform 0.2s;
        }

        .test-card button:hover {
            transform: translateY(-2px);
        }

        .test-card button:active {
            transform: translateY(0);
        }

        .result {
            background: #f8f9fa;
            padding: 12px;
            border-radius: 5px;
            margin-top: 10px;
            max-height: 300px;
            overflow-y: auto;
            font-size: 12px;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            word-break: break-all;
        }

        .result.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .result.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .console-section {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .console-section h3 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .console {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 15px;
            border-radius: 5px;
            max-height: 400px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            line-height: 1.5;
        }

        .console-log {
            margin: 5px 0;
            padding: 5px;
            border-left: 3px solid #4fc3f7;
        }

        .console-error {
            color: #f48771;
            border-left-color: #f48771;
        }

        .console-success {
            color: #89d185;
            border-left-color: #89d185;
        }

        .api-config {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .api-config h3 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .config-item {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            border-bottom: 1px solid #eee;
            font-size: 14px;
        }

        .config-item:last-child {
            border-bottom: none;
        }

        .config-key {
            color: #667eea;
            font-weight: bold;
        }

        .config-value {
            color: #764ba2;
            font-family: 'Courier New', monospace;
        }

        .test-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .test-header button {
            padding: 10px 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }

        .data-display {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-top: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .data-display h3 {
            color: #667eea;
            margin-bottom: 15px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 14px;
        }

        th {
            background: #f8f9fa;
            color: #667eea;
            padding: 12px;
            text-align: left;
            border-bottom: 2px solid #ddd;
            font-weight: bold;
        }

        td {
            padding: 12px;
            border-bottom: 1px solid #eee;
        }

        tr:hover {
            background: #f8f9fa;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <h1>üé® Art Exhibitions API Integration Test</h1>
            <p>Testing API endpoints for Art Exhibitions and Categories</p>
            <div class="status loading">‚è≥ Test Suite Ready</div>
        </header>

        <!-- API Configuration -->
        <div class="api-config">
            <h3>API Configuration</h3>
            <div class="config-item">
                <span class="config-key">Base URL:</span>
                <span class="config-value" id="baseUrl">http://93.127.194.118:8095</span>
            </div>
            <div class="config-item">
                <span class="config-key">API Prefix:</span>
                <span class="config-value">/api/v1</span>
            </div>
            <div class="config-item">
                <span class="config-key">Exhibitions Endpoint:</span>
                <span class="config-value">/api/v1/art-exhibitions</span>
            </div>
            <div class="config-item">
                <span class="config-key">Categories Endpoint:</span>
                <span class="config-value">/api/v1/art-exhibitions-categories</span>
            </div>
        </div>

        <!-- Test Controls -->
        <div class="test-header">
            <h2>Test Cases</h2>
            <button onclick="clearConsole()">Clear Console</button>
        </div>

        <!-- Tests Grid -->
        <div class="tests-grid">
            <!-- Test 1: Get All Exhibitions -->
            <div class="test-card">
                <h2>üìã Get All Exhibitions</h2>
                <p style="font-size: 12px; color: #666; margin-bottom: 15px;">
                    Fetch all exhibitions from the API
                </p>
                <button onclick="testGetAllExhibitions()">Run Test</button>
                <div class="result" id="result1"></div>
            </div>

            <!-- Test 2: Get Exhibitions by Category -->
            <div class="test-card">
                <h2>üéØ Get Exhibitions by Category</h2>
                <p style="font-size: 12px; color: #666; margin-bottom: 15px;">
                    Filter exhibitions by watercolor category
                </p>
                <button onclick="testGetByCategory()">Run Test</button>
                <div class="result" id="result2"></div>
            </div>

            <!-- Test 3: Get Featured Exhibitions -->
            <div class="test-card">
                <h2>‚≠ê Get Featured Exhibitions</h2>
                <p style="font-size: 12px; color: #666; margin-bottom: 15px;">
                    Fetch only featured exhibitions
                </p>
                <button onclick="testGetFeatured()">Run Test</button>
                <div class="result" id="result3"></div>
            </div>

            <!-- Test 4: Get Root Categories -->
            <div class="test-card">
                <h2>üìÇ Get Root Categories</h2>
                <p style="font-size: 12px; color: #666; margin-bottom: 15px;">
                    Fetch all exhibition categories
                </p>
                <button onclick="testGetRootCategories()">Run Test</button>
                <div class="result" id="result4"></div>
            </div>

            <!-- Test 5: Get Exhibition by ID -->
            <div class="test-card">
                <h2>üîç Get Exhibition by ID</h2>
                <p style="font-size: 12px; color: #666; margin-bottom: 15px;">
                    Fetch a specific exhibition (ID: 1)
                </p>
                <button onclick="testGetById()">Run Test</button>
                <div class="result" id="result5"></div>
            </div>

            <!-- Test 6: Get Upcoming Exhibitions -->
            <div class="test-card">
                <h2>‚è∞ Get Upcoming Exhibitions</h2>
                <p style="font-size: 12px; color: #666; margin-bottom: 15px;">
                    Fetch exhibitions with upcoming status
                </p>
                <button onclick="testGetUpcoming()">Run Test</button>
                <div class="result" id="result6"></div>
            </div>

            <!-- Test 7: Get Ongoing Exhibitions -->
            <div class="test-card">
                <h2>üî¥ Get Ongoing Exhibitions</h2>
                <p style="font-size: 12px; color: #666; margin-bottom: 15px;">
                    Fetch currently ongoing exhibitions
                </p>
                <button onclick="testGetOngoing()">Run Test</button>
                <div class="result" id="result7"></div>
            </div>

            <!-- Test 8: Create Exhibition (Mock) -->
            <div class="test-card">
                <h2>‚ûï Create Exhibition</h2>
                <p style="font-size: 12px; color: #666; margin-bottom: 15px;">
                    Create a new exhibition (requires token)
                </p>
                <button onclick="testCreateExhibition()">Run Test</button>
                <div class="result" id="result8"></div>
            </div>
        </div>

        <!-- Console Output -->
        <div class="console-section">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <h3>üì° API Response Console</h3>
                <button onclick="downloadLogs()" style="padding: 8px 16px; background: #667eea; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 12px;">
                    Download Logs
                </button>
            </div>
            <div class="console" id="console"></div>
        </div>

        <!-- Data Display -->
        <div class="data-display" id="dataDisplay" style="display: none;">
            <h3>üìä Latest API Response Data</h3>
            <table id="dataTable">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Title</th>
                        <th>Category</th>
                        <th>Status</th>
                        <th>Date</th>
                    </tr>
                </thead>
                <tbody id="tableBody"></tbody>
            </table>
        </div>
    </div>

    <script>
        const BASE_URL = 'http://93.127.194.118:8095';
        const API_PREFIX = '/api/v1';

        const API_ENDPOINTS = {
            ART_EXHIBITIONS: {
                GET_ALL: `${API_PREFIX}/art-exhibitions`,
                GET_BY_ID: (id) => `${API_PREFIX}/art-exhibitions/${id}`,
            },
            ART_EXHIBITIONS_CATEGORIES: {
                GET_ROOT: `${API_PREFIX}/art-exhibitions-categories/root`,
                GET_BY_ID: (id) => `${API_PREFIX}/art-exhibitions-categories/${id}`,
            },
        };

        function log(message, type = 'log', data = null) {
            const console = document.getElementById('console');
            const timestamp = new Date().toLocaleTimeString();
            const className = type === 'error' ? 'console-error' : type === 'success' ? 'console-success' : 'console-log';
            
            let logText = `[${timestamp}] ${message}`;
            if (data) {
                logText += `\n${JSON.stringify(data, null, 2)}`;
            }

            const logElement = document.createElement('div');
            logElement.className = `console-log ${className}`;
            logElement.textContent = logText;
            console.appendChild(logElement);
            console.scrollTop = console.scrollHeight;
        }

        function showResult(resultId, success, message, data = null) {
            const resultElement = document.getElementById(resultId);
            resultElement.className = `result ${success ? 'success' : 'error'}`;
            resultElement.textContent = message;
            if (data) {
                resultElement.textContent += `\n\n${JSON.stringify(data, null, 2)}`;
            }
        }

        async function fetchAPI(endpoint, options = {}) {
            try {
                log(`Fetching: ${BASE_URL}${endpoint}`);
                const response = await fetch(`${BASE_URL}${endpoint}`, {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json',
                        ...options.headers
                    },
                    ...options
                });

                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }

                const data = await response.json();
                log('API Response Received', 'success', data);
                return { success: true, data };
            } catch (error) {
                log(`Error: ${error.message}`, 'error');
                return { success: false, error: error.message };
            }
        }

        async function testGetAllExhibitions() {
            log('üß™ Testing: Get All Exhibitions');
            const result = await fetchAPI(API_ENDPOINTS.ART_EXHIBITIONS.GET_ALL);
            
            if (result.success) {
                const exhibitions = result.data.data || result.data;
                showResult('result1', true, `‚úÖ Success! Retrieved ${exhibitions.length} exhibitions`, exhibitions);
                displayDataTable(exhibitions);
            } else {
                showResult('result1', false, `‚ùå Failed: ${result.error}`);
            }
        }

        async function testGetByCategory() {
            log('üß™ Testing: Get Exhibitions by Category (watercolor)');
            const result = await fetchAPI(`${API_ENDPOINTS.ART_EXHIBITIONS.GET_ALL}?category=watercolor`);
            
            if (result.success) {
                const exhibitions = result.data.data || result.data;
                showResult('result2', true, `‚úÖ Success! Retrieved ${exhibitions.length} watercolor exhibitions`, exhibitions);
            } else {
                showResult('result2', false, `‚ùå Failed: ${result.error}`);
            }
        }

        async function testGetFeatured() {
            log('üß™ Testing: Get Featured Exhibitions');
            const result = await fetchAPI(`${API_ENDPOINTS.ART_EXHIBITIONS.GET_ALL}?featured=true`);
            
            if (result.success) {
                const exhibitions = result.data.data || result.data;
                showResult('result3', true, `‚úÖ Success! Retrieved ${exhibitions.length} featured exhibitions`, exhibitions);
            } else {
                showResult('result3', false, `‚ùå Failed: ${result.error}`);
            }
        }

        async function testGetRootCategories() {
            log('üß™ Testing: Get Root Categories');
            const result = await fetchAPI(API_ENDPOINTS.ART_EXHIBITIONS_CATEGORIES.GET_ROOT);
            
            if (result.success) {
                const categories = result.data.data || result.data;
                showResult('result4', true, `‚úÖ Success! Retrieved ${categories.length} categories`, categories);
            } else {
                showResult('result4', false, `‚ùå Failed: ${result.error}`);
            }
        }

        async function testGetById() {
            log('üß™ Testing: Get Exhibition by ID (1)');
            const result = await fetchAPI(API_ENDPOINTS.ART_EXHIBITIONS.GET_BY_ID(1));
            
            if (result.success) {
                const exhibition = result.data.data || result.data;
                showResult('result5', true, `‚úÖ Success! Retrieved exhibition: ${exhibition.title}`, exhibition);
            } else {
                showResult('result5', false, `‚ùå Failed: ${result.error}`);
            }
        }

        async function testGetUpcoming() {
            log('üß™ Testing: Get Upcoming Exhibitions');
            const result = await fetchAPI(`${API_ENDPOINTS.ART_EXHIBITIONS.GET_ALL}?status=upcoming`);
            
            if (result.success) {
                const exhibitions = result.data.data || result.data;
                showResult('result6', true, `‚úÖ Success! Retrieved ${exhibitions.length} upcoming exhibitions`, exhibitions);
            } else {
                showResult('result6', false, `‚ùå Failed: ${result.error}`);
            }
        }

        async function testGetOngoing() {
            log('üß™ Testing: Get Ongoing Exhibitions');
            const result = await fetchAPI(`${API_ENDPOINTS.ART_EXHIBITIONS.GET_ALL}?status=ongoing`);
            
            if (result.success) {
                const exhibitions = result.data.data || result.data;
                showResult('result7', true, `‚úÖ Success! Retrieved ${exhibitions.length} ongoing exhibitions`, exhibitions);
            } else {
                showResult('result7', false, `‚ùå Failed: ${result.error}`);
            }
        }

        async function testCreateExhibition() {
            log('üß™ Testing: Create Exhibition (Mock - No Token)');
            showResult('result8', false, '‚ö†Ô∏è Skipped - Requires authentication token. This would POST to the API.');
            log('Note: POST requests require valid authentication token', 'log');
        }

        function displayDataTable(exhibitions) {
            document.getElementById('dataDisplay').style.display = 'block';
            const tbody = document.getElementById('tableBody');
            tbody.innerHTML = '';
            
            exhibitions.forEach(ex => {
                const row = `<tr>
                    <td>${ex.id}</td>
                    <td>${ex.title}</td>
                    <td>${ex.category || 'N/A'}</td>
                    <td>${ex.status || 'N/A'}</td>
                    <td>${ex.date || 'N/A'}</td>
                </tr>`;
                tbody.innerHTML += row;
            });
        }

        function clearConsole() {
            document.getElementById('console').innerHTML = '';
            log('Console cleared');
        }

        function downloadLogs() {
            const consoleText = document.getElementById('console').innerText;
            const element = document.createElement('a');
            element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(consoleText));
            element.setAttribute('download', `api-test-logs-${new Date().toISOString()}.txt`);
            element.style.display = 'none';
            document.body.appendChild(element);
            element.click();
            document.body.removeChild(element);
        }

        // Initial log
        window.addEventListener('load', () => {
            log('API Test Suite Initialized', 'success');
            log(`Base URL: ${BASE_URL}`, 'log');
        });
    </script>
</body>
</html>
